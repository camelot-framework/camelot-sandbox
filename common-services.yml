maven:
  image: nginx
  dns: 172.17.42.1
  expose:
    - 80:80
camelot:
  image: maven:3.3.3-jdk-8
  dns: 172.17.42.1
  volumes:
    - ./target/camelot/bin:/etc/camelot/bin
    - ./src/main/resources/camelot/conf:/etc/camelot/conf:ro
    - ./target/extensions:/etc/camelot/extensions:ro
    - ./target/camelot/lib:/etc/camelot/lib
    - ./target/camelot/plugins:/etc/camelot/plugins:ro
    - ./target/camelot/webapps:/etc/camelot/webapps:ro
  command: /bin/bash /etc/camelot/conf/run.sh
  environment:
    JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64
hazelcast:
  build: src/main/resources/hazelcast/
  expose:
    - 5701:5701
  dns: 172.17.42.1
  environment:
    HZ_VERSION: 3.5
  volumes:
    - ./src/main/resources/hazelcast:/run:ro
  command: /bin/sh -c '/run/run.sh'

rabbitmq:
  image: rabbitmq:3-management
  dns: 172.17.42.1
  environment:
    RABBITMQ_ERLANG_COOKIE: 'rabbit'
  volumes:
    - ./target/classes/rabbitmq:/etc/rabbitmq
  command: '/bin/bash /etc/rabbitmq/run.sh'
  expose:
    - 5672:5672
    - 4369:4369
    - 15672:15672
    - 25672:25672
